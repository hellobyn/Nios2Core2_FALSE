
#include <unistd.h>
#include "../inc/sopc.h"
#include "sys/alt_irq.h"
#include "altera_avalon_timer_regs.h"
#include "alt_types.h"

//函数声明
static void timerInit(void);

//变量声明
int i = 0, j = 0, flag;
alt_u32 timerPrd[4] = {5000000, 10000000, 25000000, 50000000};

int main(void)
{
	timerInit();
	LED->DATA = 1;
	while(1);
	return 0;
}

void timerInit(void)
{
	TIMER0->STATUS = 0;
	TIMER0->PERIODL = 50000000;
	TIMER0->PERIODH = 50000000 >> 16;
	TIMER0->CONTROL = 7;
	alt_irq_register(TIMER_0_IRQ, (void *)TIMER_0_BASE, timer0Isr);
}

static void timer0Isr(void *context, alt_u32 id)
{
	LED->DATA = ~LED->DATA;
}
